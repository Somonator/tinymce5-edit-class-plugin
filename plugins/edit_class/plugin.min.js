tinymce.PluginManager.add("edit_class",function(t,e){function i(t,e){tinymce.activeEditor.undoManager.transact(function(){tinymce.activeEditor.focus(),tinymce.activeEditor.formatter[t]("edit_class",{value:e},null,!0),tinymce.activeEditor.nodeChanged()})}function n(){return new Promise(function(t,e){tinymce.activeEditor.dom.getParents(tinymce.activeEditor.selection.getStart(),function(e){let i=e.nodeName.toLowerCase(),n="";!e.classList.contains("mce-edit-focus")&&c.includes(i)&&(n=e.getAttribute("class"),t(n||""))}),t("")})}async function a(){t.windowManager.open({title:"Введите класс",body:{type:"panel",items:[{type:"input",name:"class"}]},initialData:{class:await n(!0)},buttons:[{type:"submit",text:"OK",primary:!0}],onSubmit:function(t){let e=t.getData();i("apply",e.class),t.close()}})}let c="p,h1,h2,h3,h4,h5,h6,div,ul,ol,table,img";return t.ui.registry.addMenuItem("edit_class",{text:"Изменить класс",onAction:function(){a()}}),t.on("init",function(e){tinymce.get(t.id).formatter.register("edit_class",{selector:c,attributes:{class:"%value"},remove_similar:!0})}),{getMetadata:function(){return{name:"Edit class",url:""}}}});